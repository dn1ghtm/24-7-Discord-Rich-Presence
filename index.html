<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discord 24/7 Rich Presence</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #36393f;
            color: #dcddde;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: #2f3136;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        h1, h2, h3 {
            color: #ffffff;
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #7289da;
        }
        .status {
            background-color: #40444b;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }
        .status-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        .status-indicator {
            width: 12px;
            height: 12px;
            background-color: #43b581;
            border-radius: 50%;
            margin-right: 10px;
        }
        .status-title {
            font-weight: bold;
            margin: 0;
        }
        .status-details {
            display: flex;
            flex-wrap: wrap;
        }
        .status-item {
            flex: 1 0 50%;
            margin-bottom: 10px;
        }
        .status-label {
            font-weight: bold;
            color: #b9bbbe;
            font-size: 0.9em;
            display: block;
        }
        .status-value {
            color: #ffffff;
        }
        .discord-logo {
            display: block;
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
        }
        .buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }
        .button {
            background-color: #7289da;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            text-decoration: none;
            font-weight: bold;
            transition: background-color 0.2s;
        }
        .button:hover {
            background-color: #5b6eae;
        }
        .footer {
            text-align: center;
            margin-top: 30px;
            color: #72767d;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <svg class="discord-logo" viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg">
            <path fill="#7289da" d="M97.98 35.79c-7.73-3.57-16.02-6.21-24.68-7.73-0.31-0.05-0.62 0.09-0.79 0.36-2.13 3.78-4.01 7.77-5.6 11.9-6.03-0.9-12.01-0.9-17.91 0-1.59-4.13-3.52-8.12-5.65-11.9-0.17-0.27-0.48-0.41-0.79-0.36-8.66 1.52-16.95 4.16-24.68 7.73-0.13 0.05-0.24 0.15-0.31 0.28-15.72 23.5-20.02 46.44-17.91 69.09 0.04 0.39 0.26 0.74 0.6 0.95 9.56 7 18.82 11.25 27.9 14.06 0.31 0.09 0.65 0 0.87-0.24 2.39-3.26 4.52-6.71 6.34-10.34 0.17-0.34 0.05-0.74-0.26-0.95-3.04-1.15-5.93-2.56-8.73-4.16-0.35-0.21-0.39-0.71-0.09-0.97 0.59-0.44 1.17-0.9 1.73-1.37 0.17-0.15 0.41-0.17 0.62-0.09 31.09 14.19 64.76 14.19 95.55 0 0.21-0.09 0.44-0.07 0.62 0.09 0.56 0.47 1.14 0.93 1.73 1.37 0.31 0.26 0.26 0.76-0.09 0.97-2.8 1.63-5.69 3.01-8.73 4.16-0.31 0.21-0.43 0.62-0.26 0.95 1.86 3.63 3.98 7.08 6.34 10.34 0.21 0.24 0.56 0.33 0.87 0.24 9.12-2.81 18.38-7.06 27.94-14.06 0.34-0.21 0.56-0.56 0.6-0.95 2.54-26.28-4.25-49.03-17.95-69.09-0.07-0.13-0.18-0.23-0.31-0.28zM45.06 86.22c-5.5 0-10.02-5.05-10.02-11.25s4.44-11.25 10.02-11.25c5.62 0 10.1 5.09 10.02 11.25 0 6.2-4.44 11.25-10.02 11.25zm37.03 0c-5.5 0-10.02-5.05-10.02-11.25s4.44-11.25 10.02-11.25c5.62 0 10.1 5.09 10.02 11.25 0 6.2-4.4 11.25-10.02 11.25z"/>
        </svg>
        
        <h1>Discord 24/7 Rich Presence</h1>
        
        <div class="status">
            <div class="status-header">
                <div class="status-indicator"></div>
                <h3 class="status-title">Status: Active</h3>
            </div>
            
            <div class="status-details">
                <div class="status-item">
                    <span class="status-label">Activity Type</span>
                    <span class="status-value" id="activity-type">WATCHING</span>
                </div>
                <div class="status-item">
                    <span class="status-label">Activity Name</span>
                    <span class="status-value" id="activity-name">Youtube</span>
                </div>
                <div class="status-item">
                    <span class="status-label">Details</span>
                    <span class="status-value" id="details">Watching Nexos Creator</span>
                </div>
                <div class="status-item">
                    <span class="status-label">State</span>
                    <span class="status-value" id="state">Subscribe</span>
                </div>
                <div class="status-item">
                    <span class="status-label">Large Image Text</span>
                    <span class="status-value" id="large-image-text">Watching Nexos Creator</span>
                </div>
                <div class="status-item">
                    <span class="status-label">Small Image Text</span>
                    <span class="status-value" id="small-image-text">Subscribe</span>
                </div>
                <div class="status-item">
                    <span class="status-label">URL</span>
                    <span class="status-value" id="url">https://www.youtube.com/@nexoscreator</span>
                </div>
                <div class="status-item">
                    <span class="status-label">Uptime</span>
                    <span class="status-value" id="uptime">Loading...</span>
                </div>
            </div>
        </div>
        
        <div class="buttons" id="button-container">
            <!-- Buttons will be added dynamically -->
        </div>
        
        <div class="footer">
            <p>Discord 24/7 Rich Presence Add-on for Home Assistant</p>
        </div>
    </div>

    <script>
        // Function to update the UI with the current configuration
        function updateUI() {
            fetch('/api/status')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('activity-type').textContent = data.type || 'WATCHING';
                    document.getElementById('activity-name').textContent = data.name || 'Youtube';
                    document.getElementById('details').textContent = data.details || 'Watching Nexos Creator';
                    document.getElementById('state').textContent = data.state || 'Subscribe';
                    document.getElementById('large-image-text').textContent = data.largeImageText || 'Watching Nexos Creator';
                    document.getElementById('small-image-text').textContent = data.smallImageText || 'Subscribe';
                    document.getElementById('url').textContent = data.url || 'https://www.youtube.com/@nexoscreator';
                    document.getElementById('uptime').textContent = data.uptime || 'Unknown';
                    
                    // Add buttons
                    const buttonContainer = document.getElementById('button-container');
                    buttonContainer.innerHTML = '';
                    
                    if (data.buttons && data.buttons.length > 0) {
                        data.buttons.forEach(button => {
                            const buttonElement = document.createElement('a');
                            buttonElement.href = button.url;
                            buttonElement.target = '_blank';
                            buttonElement.className = 'button';
                            buttonElement.textContent = button.name;
                            buttonContainer.appendChild(buttonElement);
                        });
                    }
                })
                .catch(error => {
                    console.error('Error fetching status:', error);
                    document.getElementById('uptime').textContent = 'Error connecting to service';
                });
        }
        
        // Update UI on load
        updateUI();
        
        // Update UI every 30 seconds
        setInterval(updateUI, 30000);
        
        // Calculate and update uptime
        function updateUptime() {
            const uptimeElement = document.getElementById('uptime');
            if (uptimeElement.textContent === 'Loading...') return;
            
            const startTime = new Date(uptimeElement.dataset.startTime || Date.now());
            if (!uptimeElement.dataset.startTime) {
                uptimeElement.dataset.startTime = startTime.toISOString();
            }
            
            const now = new Date();
            const diff = now - startTime;
            
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            
            let uptimeText = '';
            if (days > 0) uptimeText += `${days}d `;
            uptimeText += `${hours}h ${minutes}m`;
            
            uptimeElement.textContent = uptimeText;
        }
        
        // Update uptime every minute
        setInterval(updateUptime, 60000);
    </script>
</body>
</html>